<!DOCTYPE html>
<html>
<head>
	<title>Remorun</title>
	<script src="socketio.js"></script>
	<script src="jquery.js"></script>
	<style>
		html, body {
			margin: 0px;
			background-color: rgb(20,20,20);
			width: 100%;
			height: 100%;
			overflow: hidden;
			-webkit-touch-callout: none;
			-webkit-user-select: none;
			-khtml-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;
		}
		#button {
			-webkit-transition: all 200ms cubic-bezier(0.190, 1.000, 0.220, 1.000); 
			-moz-transition: all 200ms cubic-bezier(0.190, 1.000, 0.220, 1.000); 
			-o-transition: all 200ms cubic-bezier(0.190, 1.000, 0.220, 1.000); 
			transition: all 200ms cubic-bezier(0.190, 1.000, 0.220, 1.000);
			box-sizing: border-box;
			width: 100%;
			height: 100%;
			display: block;
			text-decoration: none;
			cursor: pointer;
			user-select: none;
			position: relative;
		}
		#command {
			font-size: 3rem;
			color: #5f5f5f;
			display: block;
			padding: 1.5rem;
		}
		.ink {
			display: block;
			position: absolute;
			background-color: #0098ff;
			border-radius: 100%;
			transform: scale(0);
		}
		.ink.animate {
			animation: ripple 2.5s cubic-bezier(0.190, 1.000, 0.220, 1.000);
		}
		@keyframes ripple {
			100% {opacity: 0; transform: scale(2.5);}
		}
	</style>
	<script>
		const socket = io();
		var color;
		socket.on('data', function(data) {
			data = JSON.parse(data);
			color = ('rgb(' + data.color + ')');
			$('#command').css({
				'color': color
			});
			$("#command").text(data.command);
			document.title = data.name;
		})
		$(document).ready(function() {
			var parent, ink, d, x, y;
			$("#button").click(function(event){
				socket.emit('run', '')
				parent = $(this).parent();
				if(parent.find(".ink").length == 0) {
					parent.prepend("<span class='ink'></span>");
				}
				ink = parent.find(".ink");
				ink.removeClass("animate");
				if(!ink.height() && !ink.width()) {
					const d = Math.max(parent.outerWidth(), parent.outerHeight());
					ink.css({
						height: d,
						width: d
					});
				}
				const x = event.pageX - parent.offset().left - ink.width() / 2;
				const y = event.pageY - parent.offset().top - ink.height() / 2;
				ink.css({
					'top': y+'px',
					'left': x+'px',
					'background-color': color
				}).addClass("animate");
			})
		})
	</script>
</head>
<body>
	<div id="button">
		<div id="command">#command</div>
	</div>
</body>
</html>